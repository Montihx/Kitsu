Setup & Deploy ‚Äî KITSU

üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞ KITSU –≤ development –∏ production.
–î–æ–∫—É–º–µ–Ω—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è —á–µ–ª–æ–≤–µ–∫–æ–º –∏ AI-–∞–≥–µ–Ω—Ç–æ–º.

–¶–µ–ª–∏:
	‚Ä¢	–∏—Å–∫–ª—é—á–∏—Ç—å ‚Äú–º–∞–≥–∏—á–µ—Å–∫–∏–µ‚Äù —à–∞–≥–∏
	‚Ä¢	–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
	‚Ä¢	–æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ —É—Ç–µ—á–µ–∫

‚∏ª

1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é

1.1 –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
	‚Ä¢	OS: Linux / macOS (Windows —á–µ—Ä–µ–∑ WSL2)
	‚Ä¢	Docker 24+
	‚Ä¢	Docker Compose v2
	‚Ä¢	Node.js 18+
	‚Ä¢	Python 3.11+

‚∏ª

2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ ENV.

2.1 Backend (backend/.env)

ENV=development

POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=kitsu
POSTGRES_USER=kitsu
POSTGRES_PASSWORD=secure_password

REDIS_HOST=redis
REDIS_PORT=6379

KODIK_API_KEY=********
SHIKIMORI_CLIENT_ID=********
SHIKIMORI_CLIENT_SECRET=********

RATE_LIMIT_PER_MINUTE=100

‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

‚∏ª

2.2 Frontend (frontend/.env.local)

NEXT_PUBLIC_API_BASE_URL=https://api.localhost

Frontend –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤.

‚∏ª

3. –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (Docker)

docker-compose up --build

–°–µ—Ä–≤–∏—Å—ã:
	‚Ä¢	frontend ‚Üí http://localhost:3000
	‚Ä¢	backend ‚Üí http://localhost:8000
	‚Ä¢	postgres ‚Üí internal
	‚Ä¢	redis ‚Üí internal

‚∏ª

4. –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

docker-compose exec backend alembic upgrade head

–ü—Ä–∞–≤–∏–ª–∞:
	‚Ä¢	–ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã ‚Äî —á–µ—Ä–µ–∑ Alembic
	‚Ä¢	—Ä—É—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω—ã

‚∏ª

5. Production –∑–∞–ø—É—Å–∫

5.1 –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞
	‚Ä¢	HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
	‚Ä¢	ENV –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ secrets manager
	‚Ä¢	DEBUG –∑–∞–ø—Ä–µ—â—ë–Ω

5.2 Reverse Proxy

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
	‚Ä¢	Nginx
	‚Ä¢	Traefik

Backend –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

‚∏ª

6. –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
	‚Ä¢	—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON-–ª–æ–≥–∏
	‚Ä¢	error-level –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π

‚∏ª

7. –ó–∞–ø—Ä–µ—â–µ–Ω–æ
	‚Ä¢	–∑–∞–ø—É—Å–∫ –±–µ–∑ Docker
	‚Ä¢	—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ
	‚Ä¢	–¥–æ—Å—Ç—É–ø –∫ backend –±–µ–∑ proxy

‚∏ª

üìå –°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞
	‚Ä¢	–∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π
	‚Ä¢	production-grade
	‚Ä¢	–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
